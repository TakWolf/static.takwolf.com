function D2D_Engine(b,d,a,p){this.canvas=document.getElementById(b);this.canvas.width=a;this.canvas.height=p;this.context2D=this.canvas.getContext("2d");this.canvasBuffer=document.createElement("canvas");this.canvasBuffer.width=a;this.canvasBuffer.height=p;this.contextBuffer2D=this.canvasBuffer.getContext("2d");this.fps=d;this.currentFps=0;this.frameCounter=0;this.timeCounter=0;this.canvas.mouseStates={leftButton:{down:false,up:false,click:false,dblclick:false},rightButton:{down:false,up:false,click:false,dblclick:false},middleButton:{down:false,up:false,click:false,dblclick:false},pos:{x:0,y:0},wheel:false,move:false,out:false,over:false,wheelDelta:0};function h(q){q=q||window.event;if(!-[1,]){switch(q.button){case 1:this.mouseStates.leftButton.down=true;break;case 2:this.mouseStates.rightButton.down=true;break;case 4:this.mouseStates.middleButton.down=true;break;}}else{switch(q.which){case 1:this.mouseStates.leftButton.down=true;break;case 2:this.mouseStates.middleButton.down=true;break;case 3:this.mouseStates.rightButton.down=true;break;}}q.preventDefault();}function j(q){q=q||window.event;if(!-[1,]){switch(q.button){case 1:this.mouseStates.leftButton.up=true;this.mouseStates.leftButton.down=false;break;case 2:this.mouseStates.rightButton.up=true;this.mouseStates.rightButton.down=false;break;case 4:this.mouseStates.middleButton.up=true;this.mouseStates.middleButton.down=false;break;}}else{switch(q.which){case 1:this.mouseStates.leftButton.up=true;this.mouseStates.leftButton.down=false;break;case 2:this.mouseStates.middleButton.up=true;this.mouseStates.middleButton.down=false;break;case 3:this.mouseStates.rightButton.up=true;this.mouseStates.rightButton.down=false;break;}}q.preventDefault();}function o(q){q=q||window.event;if(!-[1,]){switch(q.button){case 1:this.mouseStates.leftButton.click=true;break;case 2:this.mouseStates.rightButton.click=true;break;case 4:this.mouseStates.middleButton.click=true;break;}}else{switch(q.which){case 1:this.mouseStates.leftButton.click=true;break;case 2:this.mouseStates.middleButton.click=true;break;case 3:this.mouseStates.rightButton.click=true;break;}}q.preventDefault();}function n(q){q=q||window.event;if(!-[1,]){switch(q.button){case 1:this.mouseStates.leftButton.dblclick=true;break;case 2:this.mouseStates.rightButton.dblclick=true;break;case 4:this.mouseStates.middleButton.dblclick=true;break;}}else{switch(q.which){case 1:this.mouseStates.leftButton.dblclick=true;break;case 2:this.mouseStates.middleButton.dblclick=true;break;case 3:this.mouseStates.rightButton.dblclick=true;break;}}q.preventDefault();}function k(q){q=q||window.event;this.mouseStates.wheel=true;if(q.wheelDelta){this.mouseStates.wheelDelta=q.wheelDelta/120;}else{if(q.detail){this.mouseStates.wheelDelta=-q.detail/3;}}q.preventDefault();}function m(r){r=r||window.event;this.mouseStates.move=true;if(navigator.userAgent.indexOf("Firefox")>0){var q=this.getBoundingClientRect();this.mouseStates.pos.x=r.clientX-q.left;this.mouseStates.pos.y=r.clientY-q.top;}else{this.mouseStates.pos.x=r.offsetX;this.mouseStates.pos.y=r.offsetY;}r.preventDefault();}function i(q){q=q||window.event;this.mouseStates.out=true;this.mouseStates.leftButton.down=false;this.mouseStates.rightButton.down=false;this.mouseStates.middleButton.down=false;q.preventDefault();}function c(q){q=q||window.event;this.mouseStates.over=true;q.preventDefault();}function f(q){q=q||window.event;q.returnValue=false;q.preventDefault();}this.canvas.onmousedown=h;this.canvas.onmouseup=j;this.canvas.onclick=o;this.canvas.ondblclick=n;this.canvas.onmousewheel=k;this.canvas.onmousemove=m;this.canvas.onmouseout=i;this.canvas.onmouseover=c;this.canvas.oncontextmenu=f;this.canvas.addEventListener("DOMMouseScroll",k,false);this.canvas.touchStates={};function g(q){q=q||window.event;q.preventDefault();}function e(q){q=q||window.event;q.preventDefault();}function l(q){q=q||window.event;q.preventDefault();}this.canvas.addEventListener("touchstart",g,false);this.canvas.addEventListener("touchmove",e,false);this.canvas.addEventListener("touchend",l,false);}D2D_Engine.prototype.getContext=function(){return this.contextBuffer2D;};D2D_Engine.prototype.getCanvas=function(){return this.canvas;};D2D_Engine.prototype.beginDraw=function(){};D2D_Engine.prototype.endDraw=function(){this.context2D.drawImage(this.canvasBuffer,0,0);};D2D_Engine.prototype.clear=function(a){if(a==undefined||a==null){this.contextBuffer2D.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height);}else{this.contextBuffer2D.fillStyle=a;this.contextBuffer2D.fillRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height);}};D2D_Engine.prototype.getFps=function(){return this.fps;};D2D_Engine.prototype.setFps=function(a){this.fps=a;};D2D_Engine.prototype.getCurrentFps=function(){return this.currentFps;};D2D_Engine.prototype.getWidth=function(){return this.canvas.width;};D2D_Engine.prototype.getCanvasWidth=D2D_Engine.prototype.getWidth;D2D_Engine.prototype.getHeight=function(){return this.canvas.height;};D2D_Engine.prototype.getCanvasHeight=D2D_Engine.prototype.getHeight;D2D_Engine.prototype.setWidth=function(a){this.canvas.width=a;this.canvasBuffer.width=a;};D2D_Engine.prototype.setCanvasWidth=D2D_Engine.prototype.setWidth;D2D_Engine.prototype.setHeight=function(a){this.canvas.height=a;this.canvasBuffer.height=a;};D2D_Engine.prototype.setCanvasHeight=D2D_Engine.prototype.setHeight;D2D_Engine.prototype.getMousePosX=function(){return this.canvas.mouseStates.pos.x;};D2D_Engine.prototype.getMousePosY=function(){return this.canvas.mouseStates.pos.y;};D2D_Engine.prototype.getMousePos=function(){return this.canvas.mouseStates.pos;};D2D_Engine.prototype.isMouseDown=function(a){if(a==undefined||a=="left"){return this.canvas.mouseStates.leftButton.down;}else{if(a=="right"){return this.canvas.mouseStates.rightButton.down;}else{if(a=="middle"){return this.canvas.mouseStates.middleButton.down;}else{return undefined;}}}};D2D_Engine.prototype.isMouseUp=function(a){if(a==undefined||a=="left"){return this.canvas.mouseStates.leftButton.up;}else{if(a=="right"){return this.canvas.mouseStates.rightButton.up;}else{if(a=="middle"){return this.canvas.mouseStates.middleButton.up;}else{return undefined;}}}};D2D_Engine.prototype.isMouseClick=function(a){if(a==undefined||a=="left"){return this.canvas.mouseStates.leftButton.click;}else{if(a=="right"){return this.canvas.mouseStates.rightButton.click;}else{if(a=="middle"){return this.canvas.mouseStates.middleButton.click;}else{return undefined;}}}};D2D_Engine.prototype.isMouseDblclick=function(a){if(a==undefined||a=="left"){return this.canvas.mouseStates.leftButton.dblclick;}else{if(a=="right"){return this.canvas.mouseStates.rightButton.dblclick;}else{if(a=="middle"){return this.canvas.mouseStates.middleButton.dblclick;}else{return undefined;}}}};D2D_Engine.prototype.isMouseMove=function(){return this.canvas.mouseStates.move;};D2D_Engine.prototype.isMouseWheel=function(){return this.canvas.mouseStates.wheel;};D2D_Engine.prototype.isMouseOut=function(){return this.canvas.mouseStates.out;};D2D_Engine.prototype.isMouseOver=function(){return this.canvas.mouseStates.over;};D2D_Engine.prototype.getMouseWheelDelta=function(){return this.canvas.mouseStates.wheelDelta;};D2D_Engine.prototype.getMouseWheel=D2D_Engine.prototype.getMouseWheelDelta;D2D_Engine.prototype.setCursorStyle=function(a){if(a==undefined){this.canvas.style.cursor="default";}else{this.canvas.style.cursor=a;}};D2D_Engine.prototype.setMouseStyle=D2D_Engine.prototype.setCursorStyle;D2D_Engine.prototype.getCursorStyle=function(){return this.canvas.style.cursor;};D2D_Engine.prototype.getMouseStyle=D2D_Engine.prototype.getCursorStyle;D2D_Engine.prototype.drawLine=function(d,f,c,e,b,a){this.contextBuffer2D.save();this.contextBuffer2D.beginPath();this.contextBuffer2D.moveTo(d,f);this.contextBuffer2D.lineTo(c,e);if(a!=undefined){this.contextBuffer2D.lineWidth=a;}else{this.contextBuffer2D.lineWidth=1;}this.contextBuffer2D.strokeStyle=b;this.contextBuffer2D.stroke();this.contextBuffer2D.restore();};D2D_Engine.prototype.drawFillRect=function(b,e,d,a,c){this.contextBuffer2D.save();this.contextBuffer2D.fillStyle=c;this.contextBuffer2D.fillRect(b,e,d,a);this.contextBuffer2D.restore();};D2D_Engine.prototype.drawStrokeRect=function(c,f,e,b,d,a){this.contextBuffer2D.save();if(a!=undefined){this.contextBuffer2D.lineWidth=a;}else{this.contextBuffer2D.lineWidth=1;}this.contextBuffer2D.strokeStyle=d;this.contextBuffer2D.strokeRect(c,f,e,b);this.contextBuffer2D.restore();};function startEngine(a){a.lastTime=new Date().getTime();var b=function(){var d=new Date().getTime();var c=d-a.lastTime;if(c-1000/a.fps>=0){a.lastTime=d;a.frameCounter++;a.timeCounter+=c;if(a.timeCounter>=1000){a.timeCounter-=1000;a.currentFps=a.frameCounter;a.frameCounter=0;}if(a.update!=undefined){a.update(c/1000);}if(a.draw!=undefined){a.draw(c/1000);}a.canvas.mouseStates.leftButton.up=false;a.canvas.mouseStates.leftButton.click=false;a.canvas.mouseStates.leftButton.dblclick=false;a.canvas.mouseStates.rightButton.up=false;a.canvas.mouseStates.rightButton.click=false;a.canvas.mouseStates.rightButton.dblclick=false;a.canvas.mouseStates.middleButton.up=false;a.canvas.mouseStates.middleButton.click=false;a.canvas.mouseStates.middleButton.dblclick=false;a.canvas.mouseStates.wheel=false;a.canvas.mouseStates.move=false;a.canvas.mouseStates.out=false;a.canvas.mouseStates.over=false;a.canvas.mouseStates.wheelDelta=0;}};window.setInterval(b,1);}function D2D_Loader(){this.resFinished=[];this.resWaiting=[];}D2D_Loader.prototype.load=function(a,b){var c=new a(b);this.resWaiting.push(c);return c;};D2D_Loader.prototype.add=function(c,a,b){if(c==undefined||c==null||c.isReady==undefined){c=new a(b);}this.resWaiting.push(c);};D2D_Loader.prototype.update=function(){if(this.resWaiting.length>0){for(var a=0;a<this.resWaiting.length;a++){if(this.resWaiting[a].isReady()){this.resFinished.push(this.resWaiting[a]);this.resWaiting.splice(a,1);break;}}}};D2D_Loader.prototype.updateProgress=D2D_Loader.prototype.update;D2D_Loader.prototype.getProgress=function(b){var a=Math.floor((this.resFinished.length/(this.resFinished.length+this.resWaiting.length))*100);if(b==true){return a;}else{return a/100;}};D2D_Loader.prototype.clear=function(){this.resFinished.splice(0,this.resFinished.length);this.resWaiting.splice(0,this.resWaiting.length);};D2D_Loader.prototype.dispose=function(){this.resFinished.splice(0,this.resFinished.length);this.resWaiting.splice(0,this.resWaiting.length);this.resFinished=null;this.resWaiting=null;};function D2D_Texture(a){this.image=new Image();this.image.src=a;}D2D_Texture.prototype.getWidth=function(){return this.image.width;};D2D_Texture.prototype.getHeight=function(){return this.image.height;};D2D_Texture.prototype.isReady=function(){return this.image.complete;};D2D_Texture.prototype.getDrawHandle=function(){return this.image;};D2D_Texture.prototype.dispose=function(){this.image=null;};function D2D_Audio(a){this.audio=new Audio(a);this.audio.loop=false;}D2D_Audio.prototype.play=function(){this.audio.play();};D2D_Audio.prototype.pause=function(){this.audio.pause();};D2D_Audio.prototype.stop=function(){this.audio.pause();if(this.audio.readyState==4){this.audio.currentTime=0;}};D2D_Audio.prototype.reload=function(a){this.audio.src=a;this.audio.load();};D2D_Audio.prototype.setVolume=function(a){this.audio.volume=a;};D2D_Audio.prototype.getVolume=function(){return this.audio.volume;};D2D_Audio.prototype.isLoop=function(){return this.audio.loop;};D2D_Audio.prototype.setLoop=function(a){this.audio.loop=a;};D2D_Audio.prototype.getTotalTime=function(){return this.audio.duration;};D2D_Audio.prototype.getCurrentTime=function(){return this.audio.currentTime;};D2D_Audio.prototype.setCurrentTime=function(a){this.audio.currentTime=a;};D2D_Audio.prototype.getSpeed=function(){return this.audio.playbackRate;};D2D_Audio.prototype.setSpeed=function(a){this.audio.playbackRate=a;};D2D_Audio.prototype.isPlaying=function(){return(this.audio.paused==false);};D2D_Audio.prototype.isReady=function(){return(this.audio.readyState==4);};D2D_Audio.prototype.getReadyStateCode=function(){return this.audio.readyState;};D2D_Audio.prototype.getReadyState=function(){if(this.audio.readyState==0){return"HAVE_NOTHING";}else{if(this.audio.readyState==1){return"HAVE_METADATA";}else{if(this.audio.readyState==2){return"HAVE_CURRENT_DATA";}else{if(this.audio.readyState==3){return"HAVE_FUTURE_DATA";}else{if(this.audio.readyState==4){return"HAVE_ENOUGH_DATA";}else{return"READY_STATE_ERROR";}}}}}};D2D_Audio.prototype.dispose=function(){this.audio.pause();this.audio=null;};function D2D_Video(a){this.video=document.createElement("video");this.video.src=a;this.video.loop=false;this.originX=0;this.originY=0;this.alpha=1;}D2D_Video.prototype.draw=function(b){var a=b.getContext();a.save();a.globalAlpha=this.alpha;if(arguments.length==1){a.drawImage(this.video,0-this.originX,0-this.originY);}else{if(arguments.length==3){a.drawImage(this.video,arguments[1]-this.originX,arguments[2]-this.originY);}else{if(arguments.length==5){a.drawImage(this.video,arguments[1]-this.originX,arguments[2]-this.originY,arguments[3],arguments[4]);}else{if(arguments.length==6){a.translate(arguments[1],arguments[2]);a.rotate(arguments[3]);a.scale(arguments[4],arguments[5]);a.drawImage(this.video,0-this.originX,0-this.originY,32,32);}}}}a.restore();};D2D_Video.prototype.setAlpha=function(a){this.alpha=a;};D2D_Video.prototype.getAlpha=function(){return this.alpha;};D2D_Video.prototype.setOrigin=function(b,a){this.originX=b;this.originY=a;};D2D_Video.prototype.getOriginX=function(){return this.originX;};D2D_Video.prototype.getOriginY=function(){return this.originY;};D2D_Video.prototype.getDrawHandle=function(){return this.video;};D2D_Video.prototype.play=function(){this.video.play();};D2D_Video.prototype.pause=function(){this.video.pause();};D2D_Video.prototype.stop=function(){this.video.pause();if(this.video.readyState==4){this.video.currentTime=0;}};D2D_Video.prototype.reload=function(a){this.video.src=a;this.video.load();};D2D_Video.prototype.setVolume=function(a){this.video.volume=a;};D2D_Video.prototype.getVolume=function(){return this.video.volume;};D2D_Video.prototype.isLoop=function(){return this.video.loop;};D2D_Video.prototype.setLoop=function(a){this.video.loop=a;};D2D_Video.prototype.getTotalTime=function(){return this.video.duration;};D2D_Video.prototype.getCurrentTime=function(){return this.video.currentTime;};D2D_Video.prototype.setCurrentTime=function(a){this.video.currentTime=a;};D2D_Video.prototype.getSpeed=function(){return this.video.playbackRate;};D2D_Video.prototype.setSpeed=function(a){this.video.playbackRate=a;};D2D_Video.prototype.isPlaying=function(){return(this.video.paused==false);};D2D_Video.prototype.isReady=function(){return(this.video.readyState==4);};D2D_Video.prototype.getReadyStateCode=function(){return this.video.readyState;};D2D_Video.prototype.getReadyState=function(){if(this.video.readyState==0){return"HAVE_NOTHING";}else{if(this.video.readyState==1){return"HAVE_METADATA";}else{if(this.video.readyState==2){return"HAVE_CURRENT_DATA";}else{if(this.video.readyState==3){return"HAVE_FUTURE_DATA";}else{if(this.video.readyState==4){return"HAVE_ENOUGH_DATA";}else{return"READY_STATE_ERROR";}}}}}};D2D_Video.prototype.dispose=function(){this.video.pause();this.video=null;this.originX=null;this.originY=null;this.alpha=null;};function D2D_Sprite(e,b,a,d,c){this.texture=e;this.srcX=b;this.srcY=a;this.srcWidth=d;this.srcHeight=c;this.originX=0;this.originY=0;this.alpha=1;}D2D_Sprite.prototype.draw=function(b){var a=b.getContext();a.save();a.globalAlpha=this.alpha;if(arguments.length==1){a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==3){a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==5){a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,arguments[3],arguments[4]);}else{if(arguments.length==6){a.translate(arguments[1],arguments[2]);a.rotate(arguments[3]);a.scale(arguments[4],arguments[5]);a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}}}}a.restore();};D2D_Sprite.prototype.dispose=function(){this.texture=null;this.srcX=null;this.srcY=null;this.srcWidth=null;this.srcHeight=null;this.originX=null;this.originY=null;this.alpha=null;};D2D_Sprite.prototype.setAlpha=function(a){this.alpha=a;};D2D_Sprite.prototype.getAlpha=function(){return this.alpha;};D2D_Sprite.prototype.setOrigin=function(b,a){this.originX=b;this.originY=a;};D2D_Sprite.prototype.getOriginX=function(){return this.originX;};D2D_Sprite.prototype.getOriginY=function(){return this.originY;};D2D_Sprite.prototype.getSrcX=function(){return this.srcX;};D2D_Sprite.prototype.getSrcY=function(){return this.srcY;};D2D_Sprite.prototype.getWidth=function(){return this.srcWidth;};D2D_Sprite.prototype.getHeight=function(){return this.srcHeight;};D2D_Sprite.prototype.setSrcRect=function(b,a,d,c){this.srcX=b;this.srcY=a;this.srcWidth=d;this.srcHeight=c;};D2D_Sprite.prototype.getTexture=function(){return this.texture;};D2D_Sprite.prototype.setTexture=function(a){this.texture=a;};function D2D_Animation(f,g,c,h,b,a,e,d){this.texture=f;this.srcX=b;this.srcY=a;this.srcWidth=e;this.srcHeight=d;this.horFrames=g;this.verFrames=c;this.startX=b;this.startY=a;this.fps=h;this.frameTime=0;this.originX=0;this.originY=0;this.alpha=1;}D2D_Animation.prototype.update=function(a){this.frameTime+=a;if(this.frameTime>=1/this.fps){this.frameTime=0;this.srcX+=this.srcWidth;if(this.srcX>(this.horFrames-1)*this.srcWidth+this.startX){this.srcX=this.startX;this.srcY+=this.srcHeight;if(this.srcY>(this.verFrames-1)*this.srcHeight+this.startY){this.srcY=this.startY;}}}};D2D_Animation.prototype.draw=function(b){var a=b.getContext();a.save();a.globalAlpha=this.alpha;if(arguments.length==1){a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==3){a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,this.srcWidth,this.srcHeight);}else{if(arguments.length==5){a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,arguments[1]-this.originX,arguments[2]-this.originY,arguments[3],arguments[4]);}else{if(arguments.length==6){a.translate(arguments[1],arguments[2]);a.rotate(arguments[3]);a.scale(arguments[4],arguments[5]);a.drawImage(this.texture.getDrawHandle(),this.srcX,this.srcY,this.srcWidth,this.srcHeight,0-this.originX,0-this.originY,this.srcWidth,this.srcHeight);}}}}a.restore();};D2D_Animation.prototype.dispose=function(){this.texture=null;this.srcX=null;this.srcY=null;this.srcWidth=null;this.srcHeight=null;this.horFrames=null;this.verFrames=null;this.startX=null;this.startY=null;this.fps=null;this.frameTime=null;this.originX=null;this.originY=null;};D2D_Animation.prototype.setAlpha=function(a){this.alpha=a;};D2D_Animation.prototype.getAlpha=function(){return this.alpha;};D2D_Animation.prototype.setOrigin=function(b,a){this.originX=b;this.originY=a;};D2D_Animation.prototype.getOriginX=function(){return this.originX;};D2D_Animation.prototype.getOriginY=function(){return this.originY;};D2D_Animation.prototype.getStartX=function(){return this.startX;};D2D_Animation.prototype.getStartY=function(){return this.startY;};D2D_Animation.prototype.getWidth=function(){return this.srcWidth;};D2D_Animation.prototype.getHeight=function(){return this.srcHeight;};D2D_Animation.prototype.getTexture=function(){return this.texture;};D2D_Animation.prototype.setTexture=function(a){this.texture=a;};D2D_Animation.prototype.reset=function(){this.srcX=this.startX;this.srcY=this.startY;this.frameTime=0;};D2D_Animation.prototype.getFps=function(){return this.fps;};D2D_Animation.prototype.setFps=function(a){this.fps=a;};D2D_Animation.prototype.setCurrentFrame=function(b,a){this.srcX=(b-1)*this.srcWidth+this.startX;this.srcY=(a-1)*this.srcHeight+this.startY;this.frameTime=0;};D2D_Animation.prototype.getCurrentFrameX=function(){return((this.srcX-this.startX)/this.srcWidth)+1;};D2D_Animation.prototype.getCurrentFrameY=function(){return((this.srcY-this.startY)/this.srcHeight)+1;};D2D_Animation.prototype.getHorFrames=function(){return this.horFrames;};D2D_Animation.prototype.getVerFrames=function(){return this.verFrames;};function D2D_Font(b,a,c,d){if(d==true){this.font_style="italic";}else{this.font_style="normal";}this.font_variant="normal";if(c==true){this.font_weight="bold";}else{this.font_weight="normal";}this.font_size=a;this.font_family=b;this.color="#FFFFFF";this.lineWidth=1;this.horAlign="start";this.verAlign="top";this.originX=0;this.originY=0;this.alpha=1;}D2D_Font.prototype.draw=function(e,g,a,h,f,c,b){var d=e.getContext();d.save();d.globalAlpha=this.alpha;d.fillStyle=this.color;d.font=""+this.font_style+" "+this.font_variant+" "+this.font_weight+" "+this.font_size+" "+this.font_family;d.textAlign=this.horAlign;d.textBaseline=this.verAlign;if(arguments.length==2){d.fillText(g,0-this.originX,0-this.originY);}else{if(arguments.length==4){d.fillText(g,a-this.originX,h-this.originY);}else{if(arguments.length==7){d.translate(a,h);d.rotate(f);d.scale(c,b);d.fillText(g,0-this.originX,0-this.originY);}}}d.restore();};D2D_Font.prototype.drawFillText=D2D_Font.prototype.draw;D2D_Font.prototype.drawStrokeText=function(e,g,a,h,f,c,b){var d=e.getContext();d.save();d.globalAlpha=this.alpha;d.strokeStyle=this.color;d.lineWidth=this.lineWidth;d.font=""+this.font_style+" "+this.font_variant+" "+this.font_weight+" "+this.font_size+" "+this.font_family;d.textAlign=this.horAlign;d.textBaseline=this.verAlign;if(arguments.length==2){d.strokeText(g,0-this.originX,0-this.originY);}else{if(arguments.length==4){d.strokeText(g,a-this.originX,h-this.originY);}else{if(arguments.length==7){d.translate(a,h);d.rotate(f);d.scale(c,b);d.strokeText(g,0-this.originX,0-this.originY);}}}d.restore();};D2D_Font.prototype.dispose=function(){this.font_style=null;this.font_variant=null;this.font_weight=null;this.font_size=null;this.font_family=null;this.color=null;this.lineWidth=null;this.horAlign=null;this.verAlign=null;this.originX=null;this.originY=null;this.alpha=null;};D2D_Font.prototype.setAlpha=function(a){this.alpha=a;};D2D_Font.prototype.getAlpha=function(){return this.alpha;};D2D_Font.prototype.getFontFamily=function(){return this.font_family;};D2D_Font.prototype.setFontFamily=function(a){this.font_family=a;};D2D_Font.prototype.getFontSize=function(){return this.font_size;};D2D_Font.prototype.setFontSize=function(a){this.font_size=a;};D2D_Font.prototype.isBold=function(){if(this.font_weight=="normal"){return false;}else{return true;}};D2D_Font.prototype.setBold=function(a){if(a==true){this.font_weight="bold";}else{this.font_weight="normal";}};D2D_Font.prototype.isItalic=function(){if(this.font_style=="normal"){return false;}else{return true;}};D2D_Font.prototype.setItalic=function(a){if(a==true){this.font_style="italic";}else{this.font_style="normal";}};D2D_Font.prototype.getColor=function(){return this.color;};D2D_Font.prototype.setColor=function(a){this.color=a;};D2D_Font.prototype.getLineWidth=function(){return this.lineWidth;};D2D_Font.prototype.setLineWidth=function(a){this.lineWidth=a;};D2D_Font.prototype.setOrigin=function(b,a){this.originX=b;this.originY=a;};D2D_Font.prototype.getOriginX=function(){return this.originX;};D2D_Font.prototype.getOriginY=function(){return this.originY;};D2D_Font.prototype.getHorAlign=function(){return this.horAlign;};D2D_Font.prototype.setHorAlign=function(a){this.horAlign=a;};D2D_Font.prototype.getVerAlign=function(){return this.verAlign;};D2D_Font.prototype.setVerAlign=function(a){this.verAlign=a;};function D2D_RectBox(b,d,c,a){this.x=b;this.y=d;this.width=c;this.height=a;this.originX=0;this.originY=0;}D2D_RectBox.prototype.draw=function(d,b,a){var c=d.getContext();c.save();if(b!=undefined){c.strokeStyle=b;}else{c.strokeStyle="#0000FF";}if(a!=undefined){c.lineWidth=a;}else{c.lineWidth=1;}c.strokeRect(this.x-this.originX,this.y-this.originY,this.width,this.height);c.restore();};D2D_RectBox.prototype.dispose=function(){this.x=null;this.y=null;this.width=null;this.height=null;this.originX=null;this.originY=null;};D2D_RectBox.prototype.setOrigin=function(b,a){this.originX=b;this.originY=a;};D2D_RectBox.prototype.getOriginX=function(){return this.originX;};D2D_RectBox.prototype.getOriginY=function(){return this.originY;};D2D_RectBox.prototype.getPosX=function(){return this.x;};D2D_RectBox.prototype.getPosY=function(){return this.y;};D2D_RectBox.prototype.getWidth=function(){return this.width;};D2D_RectBox.prototype.getHeight=function(){return this.height;};D2D_RectBox.prototype.setPosition=function(a,b){this.x=a;this.y=b;};D2D_RectBox.prototype.setSize=function(b,a){this.width=b;this.height=a;};D2D_RectBox.prototype.testPoint=function(a,b){return(a>=this.x-this.originX&&a<=this.x-this.originX+this.width&&b>=this.y-this.originY&&b<=this.y-this.originY+this.height);};D2D_RectBox.prototype.testRect=function(a){return(Math.abs((this.x-this.originX+this.width/2)-(a.x-a.originX+a.width/2))<=this.width/2+a.width/2&&Math.abs((this.y-this.originY+this.height/2)-(a.y-a.originY+a.height/2))<=this.height/2+a.height/2);};